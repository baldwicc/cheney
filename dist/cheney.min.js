/*! Cheney for Quail quailjs.org/cheney | quailjs.org/license */
(function($) {!function(a){a.fn.cheney=function(a){return this.length?(b.options=a,b.html=this,b.run(),this):this};var b={};b.options={},b.highlightElement=function(c){var d=b;if(!c.element.hasClass("cheney-result")){c.element.addClass("cheney-result").addClass(c.severity);var e=a("<img>").attr("alt","undefined"!=typeof d.options.strings.severity[c.severity]?d.options.strings.severity[c.severity]:c.severity).attr("src",d.options.iconPath+c.severity+".png"),f=a("<a>").attr("href","#cheney-console").attr("role","command").addClass("cheney-icon").addClass(c.severity).append(e);c.element.before(f),"undefined"==typeof d.options.clickEvent?b.attachHint(c):d.options.clickEvent(c)}d.settings.tests[c.testName].testId;var g=c.element.data("cheney-tests")||{};g[c.testName]=c.testName,c.element.add(c.element.prev(a("cheney-icon"))).data("cheney-tests",g)},b.attachHint=function(b,c){c=c||a("body");var d=this;b.element.add(b.element.prev(a(".cheney-icon"))).click(function(b){var e=a(this).data("cheney-tests");d.errorConsole.showTests(e),a("html, body").animate({scrollTop:a(this).offset().top},10),d.errorConsole.setCurrentElement(a(this),c),b.preventDefault()})},b.cleanUpHighlight=function(b){b=b||a("html"),b.find(".cheney-result").each(function(){a(this).removeClass("cheney-result").removeClass("severe").removeClass("moderate").removeClass("suggestion")}),b.find(".cheney-icon, .cheney-icon-current").remove()},b.errorConsole={$console:!1,init:function(){if(!a("#cheney-console").length){var b=this;a("body").append('<div id="cheney-console" class="element-invisible">'),this.$console=a("#cheney-console"),this.$console.append('<a name="cheney-console">'),this.$console.append('<div class="cheney-console-content" role="marquee">');var c=this.$console.append('<a role="button" class="close-console" href="#close" title="'+Drupal.t("close accessibility console")+'">&times;</a>');c.click(function(){return b.hide(),!1})}},show:function(){this.init(),this.$console.removeClass("element-invisible"),a("body").trigger("cheney-console-show")},hide:function(){this.init(),this.$console.addClass("element-invisible"),a("body").trigger("cheney-console-hide")},addTest:function(a){this.$console.append("<h3>"+b.messages[a].title+"</h3>")},showTests:function(c){var d=this;d.init();var e=d.$console.find(".cheney-console-content");e.html(""),a.each(c,function(a,c){e.append("<h3>"+b.messages[c].title+"</h3>"),e.append(b.messages[c].content)}),d.show()},setCurrentElement:function(c,d){d=d||a("body"),d.find(".cheney-icon-current").remove();var e=a("<img>").attr("alt",Drupal.t("Current element")).attr("role","note").addClass("cheney-icon-current").attr("src",b.options.iconPath+"highlighted.png");c.prev(".cheney-icon").before(e)}}}(jQuery);